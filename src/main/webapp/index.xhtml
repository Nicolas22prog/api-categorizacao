<!DOCTYPE html>
<html
    xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      
      xmlns:f="jakarta.faces.core">
    <head>
        <title>Categorias</title>
        <link rel="stylesheet" href="style.css" />
                 
    </head>
    <body>
        <h:form >
           
            <div class="selectorContainer">
                
            <p:panel header="Escolha uma categoria" class="selector">
                
                <p:selectOneMenu value="#{produtosBean.categoriaSelecionada}" id="selecaoCat" >
                    <f:selectItem itemLabel="Selecione uma categoria" itemValue=""/>
                    <f:selectItems value="#{produtosBean.categorias}" var="c" 
                                   itemLabel="#{c.name}" itemValue="#{c.id}"/>
                </p:selectOneMenu>
                
                
                <p:commandButton value="Buscar" actionListener="#{produtosBean.filtrar}" 
                                 update="tabela" icon="pi pi-search" style="margin-left: 10px" class="btn"/>
            </p:panel>
            </div>     
         
            <div class="produtos">
                
            <p:outputPanel id="tabela" >
                <p:dataTable value="#{produtosBean.produtosFiltrados}" var="produtos"
                             rendered="#{not empty produtosBean.produtosFiltrados}"
                             >
                    <p:column headerText="Ordem de venda">
                        #{produtos.order_backend}
                    </p:column>
                    <p:column headerText="Imagem">
                        <p:graphicImage value="#{produtos.thumbnail}" width="90" height="90" />
                    </p:column>
                    <p:column headerText="Nome">
                        #{produtos.title}
                    </p:column>
                    <p:column headerText="PreÃ§o">
                        #{produtos.price}
                    </p:column>
                    <p:column headerText="Link">
                        <h:outputLink value="#{produtos.permaLink}" target="_blank"> Ver Produtos no Mercado Livre</h:outputLink>
                    </p:column>
                </p:dataTable>                                            
            </p:outputPanel>
            
            </div>
        </h:form>
    </body>
</html>
